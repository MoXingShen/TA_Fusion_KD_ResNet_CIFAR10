# TA_Fusion_KD_ResNet_CIFAR10

## 1月5日中期检查
### 实验前期准备工作与基础框架构建
#### 摘要
为保障后续知识蒸馏实验的顺利开展，针对CIFAR-10数据集与ResNet系列模型，完成了**数据集预处理、模型结构定义、工具函数封装、导入机制及协同性验证**等一系列前期准备工作。通过解决Python包导入与设备适配等关键问题，构建了一套规范、可复用且鲁棒性强的实验基础框架，有效排除了数据-模型不兼容、路径错误等潜在实验风险，为基线模型训练与蒸馏实验奠定了坚实基础。

#### 1 数据集预处理模块构建
针对CIFAR-10图像分类任务，设计并实现了标准化的数据集预处理流程。在`utils/data_process.py`中，构建了包含数据增强与标准化的双分支预处理管道：训练集采用随机裁剪（`RandomCrop`，padding=4）、随机水平翻转`RandomHorizontalFlip`结合均值-标准差标准化均值`[0.4914, 0.4822, 0.4465]`，标准差`[0.2023, 0.1994, 0.2010]`的增强策略，以提升模型泛化能力；测试集仅执行标准化操作，保证评估的客观性。

基于PyTorch的`torchvision.datasets`与`DataLoader`接口，实现了数据集的自动下载、加载与批处理功能，设置批大小`batch_size`为32以适配RTX3060 GPU显存，并通过`utils/load_dataset.py`脚本完成数据集加载的独立验证，确保训练集与测试集样本数分别稳定在50000与10000，数据维度符合`(32, 3, 32, 32)`的预期输入要求。

#### 2 模型体系设计与工具函数封装
##### 2.1 ResNet系列模型定义
针对CIFAR-10的32×32小尺寸图像输入，在`models/resnet_cifar.py`中重新设计了ResNet系列模型结构，包括适用于学生模型的ResNet20与适用于教师模型的ResNet110。模型采用残差块`ResidualBlock`作为核心组件，调整网络最后一层全连接层输出维度为10，很好的匹配CIFAR-10的10分类任务需求。

##### 2.2 模型工具函数实现
在`utils/model_utils.py`中封装了模型的全流程工具函数，包括：
1.  **模型初始化与设备适配**：自动检测CUDA可用性，将模型加载至GPU设备；
2.  **参数校验机制**：通过统计模型参数总量，验证ResNet20与ResNet110（的结构正确性；
3.  **前向传播验证**：生成随机张量模拟CIFAR-10输入，验证模型输出维度为`(32, 10)`；
4.  **模型保存功能**：使用相对路径实现模型权重的存储，保存路径指向用于管理训练过程中及训练完成后的模型权重文件的`checkpoints/`目录。

#### 3 导入机制优化与路径问题解决
实验前期遭遇Python包导入的两类典型错误：`ModuleNotFoundError`与`ImportError: attempted relative import beyond top-level package`。针对上述问题，采取以下优化策略：
1.  **包标记完善**：在项目根目录及必需子模块目录下添加空`__init__.py`文件，明确Python包的层级结构；
2.  **导入方式调整**：放弃易引发层级冲突的相对导入，采用绝对导入方式重构所有跨模块导入语句，确保`utils`与`models`模块的可访问性；
3.  **运行路径规范**：严格要求实验脚本在项目根目录下以包模式（`python -m`）运行，保证模块搜索路径的正确性。

#### 4 数据-模型协同性验证
为验证真实数据集与模型的适配性，设计并实现了独立的协同性验证脚本`utils/verify_data_model.py`，验证流程包含三个核心环节：
1.  **数据集基础属性校验**：确认加载的CIFAR-10数据集样本数、批处理维度及预处理流程的正确性；
2.  **模型独立可用性验证**：完成模型的设备加载、参数校验与随机张量前向传播测试；
3.  **端到端协同性测试**：抽取真实训练数据批次，将其移至模型所在设备，执行前向传播计算，并验证输出维度为`(32, 10)`。

该验证环节有效排除了数据-模型形状不匹配、设备不一致、任务维度不兼容等关键风险，确保数据与模型能够无缝协同工作。

#### 5 实验框架目录结构规范
基于功能模块化原则，构建了规范的项目目录结构，明确各模块的功能边界：
```
TA_Fusion_KD_ResNet_CIFAR10/
├─ data/                # 数据集存储目录
├─ models/              # 模型结构定义目录
├─ utils/               # 通用工具函数目录（数据处理/模型工具/协同验证）
├─ checkpoints/         # 模型权重保存目录
└─ experiments/         # 实验执行脚本目录（预留基线训练与蒸馏实验脚本）
```

#### 6 结论
本阶段通过系统化的前期准备工作，完成了从数据集预处理、模型设计到工具函数封装、协同性验证的全流程构建，解决了包导入、设备适配等核心技术问题，形成了一套标准化、可复用的实验基础框架。该框架有效保障了后续基线模型训练与知识蒸馏实验的顺利开展，为实验结果的可靠性与可重复性提供了关键支撑。